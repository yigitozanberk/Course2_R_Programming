---
title: "Debugging_Tools"
author: "yob"
date: "3/31/2019"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.



## *** DEBUGGIN TOOLS ***

 indications that something's not right

#message : tame notification, diagnostic message, it could be nothing
# won't stop the function from executing 
#message function

#warning : indication that something unexpected happened
#sometimes you may want to ignore warnings. won't stop executing
#generated by warning function

#error : last stop. fatal problem. stops execution. 
# error messages are produced. produced by stop function

#condition : a generic concept for indication that something
# unexpected can occur

log(-1)
#[1] NaN
#Warning message:
#  In log(-1) : NaNs produced

# typical warning. maybe you don't care. you don't want
# the function's behaviour to stop

printmessage <- function(x) {
        if(x > 0)
            print("x is greater than zero")
        else
            print("x is less than or equal to zero")
        invisible(x) #stops or prevents auto printing the 
        # lastly used element- in this case the numeric vector.
        # if you call invisible, it will still return the same object,
        # but will not autoprint to console
}

printmessage(1) # works fine

printmessage(NA) #error here. NA > 0 is not defined. it can't move out
# so it has to error out.
# it was expecting TRUE/FALSE value


printmessage2 <- function(x) {
      if(is.na(x))
          print("x is a missing value!")
      else if(x > 0)
          print("x is greater than zero")
      else
          print("x is less than or equal to zero")
      invisible(x) #stops or prevents auto printing the 

}


x<- log(-1)

printmessage2(x)



#how do you know that something is wrong with your function?

#what was your input? how did you call the function?
#what were you expecting? output, messages, other results?
#what did you get?
#how does what you get differ from what you were expecting?
#were your expectations correct in the first place?
#can you reproduce the problem(exactly)? ********!!!!!!!!!


## Debugging Tools

primary tools for debugging functions in R are

#traceback
prints out the function call stack after an error occurs; does nothing if there's no error

#debug
flags a function for "debug" mode which allows you to step through execution of a function one line at a time

#browser
suspends the execution of a function wherever it is called and puts the function in debug more

#trace
allows you to insert debugging code into a function a specific places
handy if you are debugging someone else's code

#recover
allows you to modify the error behavior so that you can browse the function call stack

recover is an error handler function. rather than getting an error message, you can modify the error behavior

you can also put things like print() in between the lines
of your codes. but then you have to delete all the print statements

some people are against debugging tools :D print() is not a bad habbit. but you can also use debuggers.

#traceback

```{r}
mean(x)
# x doesn't exist
traceback()
```

#you have to call traceback immediately after the error

it will give you the last error

```{r}
lm( y ~ x)
traceback()
```
you get 7 leves of function calling

when you use debug(lm)

and lm(y~x)

it runs in debugging mode. very useful. you can execute line by line until the function prints out an error.

options(error = recover)

read.csv("nosuchfile")
"enter a frame number, or 0 to exit"


#summary

three main indications ; message, warning, error
only error is fatal

debugging tools are not a substitute for thinking!







